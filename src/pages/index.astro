---
import BaseLayout from "../layouts/BaseLayout.astro";
import ScrollingHLWPosts from "../components/ScrollingHLWPosts.astro";
import Category from "../components/Category.astro";
import Sideslot from "../components/Sideslot.astro";
import TagsCloud from "../components/TagsCloud.astro";
import FeaturedCarousel from "../components/FeaturedCarousel.astro";

const pageTitle = "XXXX";

// å®šä¹‰æ‰€æœ‰å“ç±»
const categories = [
    { name: "å®¶å±…å®¶ç”µ", href: "hlw", icon: "ğŸ ", color: "blue" },
    { name: "æ‰‹æœºæ•°ç ", href: "rw", icon: "ğŸ“±", color: "purple" },
    { name: "ITäº’è”ç½‘", href: "sj", icon: "ğŸ’»", color: "green" },
    { name: "ç”µå•†é›¶å”®", href: "gs", icon: "ğŸ›’", color: "orange" },
    { name: "æ±½è½¦å‡ºè¡Œ", href: "js", icon: "ğŸš—", color: "red" },
    { name: "æ¸¸æˆå¨±ä¹", href: "hy", icon: "ğŸ®", color: "indigo" },
    { name: "åŠå¯¼ä½“", href: "bdt", icon: "ğŸ”¬", color: "cyan" },
    { name: "æ–°åŸºå»º", href: "xjj", icon: "ğŸ—ï¸", color: "teal" },
    { name: "é…·å“è¯„æµ‹", href: "cppc", icon: "â­", color: "pink" },
];

// é¦–é¡µé‡ç‚¹å±•ç¤ºçš„å“ç±»
const featuredCategories = ["hlw", "rw", "sj"];
---

<BaseLayout pageTitle={pageTitle}>
    <!-- é¡¶éƒ¨æ»šåŠ¨æ–°é—» -->
    <div class="w-full mb-6">
        <ScrollingHLWPosts />
    </div>

    <!-- å“ç±»å¯¼èˆªæ  -->
    <div class="container mx-auto px-4 lg:px-6 mb-8">
        <div
            class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"
        >
            <div
                class="px-6 py-4 bg-gradient-to-r from-gray-50 to-blue-50 border-b border-gray-200"
            >
                <h2 class="text-lg font-bold text-gray-800 flex items-center">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-5 w-5 mr-2 text-blue-600"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
                        ></path>
                    </svg>
                    ç§‘æŠ€åˆ†ç±»å¯¼èˆª
                </h2>
            </div>
            <div class="p-4">
                <div
                    class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-9 gap-3"
                >
                    {
                        categories.map((category) => (
                            <a
                                href={`/categories/${category.href}`}
                                class={`category-nav-item bg-${category.color}-50 hover:bg-${category.color}-100 border border-${category.color}-200 rounded-xl p-3 text-center transition-all duration-300 hover:scale-105 hover:shadow-md group`}
                            >
                                <div class="text-2xl mb-1">{category.icon}</div>
                                <div
                                    class={`text-sm font-medium text-${category.color}-700 group-hover:text-${category.color}-800`}
                                >
                                    {category.name}
                                </div>
                            </a>
                        ))
                    }
                </div>
            </div>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸ - ä¸‰åˆ—å¸ƒå±€ -->
    <div class="container mx-auto px-4 lg:px-6">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            <!-- å·¦ä¾§æ  - 3åˆ—å®½åº¦ (ä»…æ¡Œé¢ç«¯æ˜¾ç¤º) -->
            <aside class="hidden lg:block lg:col-span-3">
                <div class="sticky top-6 space-y-6">
                    <!-- åŸåˆ›ç²¾é€‰ (ä»…æ¡Œé¢ç«¯æ˜¾ç¤º) -->
                    <Sideslot type="origin" length={6} />

                    <!-- ç²¾ç®€æ ‡ç­¾äº‘ (ä»…æ¡Œé¢ç«¯æ˜¾ç¤º) -->
                    <TagsCloud maxlength={8} />
                </div>
            </aside>

            <!-- ä¸»å†…å®¹åŒº - æ‰‹æœºç«¯å…¨å®½ï¼Œæ¡Œé¢ç«¯6åˆ—å®½åº¦ -->
            <main class="lg:col-span-6 space-y-8">
                <!-- ç‰¹è‰²è½®æ’­å›¾ -->
                <section class="featured-section">
                    <FeaturedCarousel />
                </section>

                <!-- é‡ç‚¹å“ç±»å±•ç¤ºåŒº -->
                <section class="categories-showcase space-y-6">
                    {
                        featuredCategories.map((categoryHref) => {
                            const category = categories.find(
                                (c) => c.href === categoryHref,
                            );
                            return (
                                <div class="category-container">
                                    <Category
                                        category={categoryHref}
                                        categoryName={category.name}
                                    />
                                </div>
                            );
                        })
                    }
                </section>
            </main>

            <!-- å³ä¾§æ  - 3åˆ—å®½åº¦ (ä»…æ¡Œé¢ç«¯æ˜¾ç¤º) -->
            <aside class="hidden lg:block lg:col-span-3">
                <div class="sticky top-6 space-y-6">
                    <!-- æœ€æ–°æ–‡ç«  (ä»…æ¡Œé¢ç«¯æ˜¾ç¤º) -->
                    <Sideslot type="newest" length={8} />

                    <!-- éšæœºæ¨è (ä»…æ¡Œé¢ç«¯æ˜¾ç¤º) -->
                    <Sideslot type="random" length={6} />
                </div>
            </aside>
        </div>

        <!-- åº•éƒ¨åŒºåŸŸ (ä»…æ¡Œé¢ç«¯æ˜¾ç¤º) -->
        <div class="mt-12 space-y-8 hidden lg:block">
            <!-- å…¶ä»–å“ç±»å¿«é€Ÿé¢„è§ˆ -->
            <section>
                <div
                    class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"
                >
                    <div
                        class="px-6 py-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-gray-200"
                    >
                        <h2 class="text-lg font-bold text-gray-800">
                            æ›´å¤šç²¾å½©åˆ†ç±»
                        </h2>
                        <p class="text-sm text-gray-600 mt-1">
                            æ¢ç´¢æ›´å¤šç§‘æŠ€é¢†åŸŸçš„æœ€æ–°èµ„è®¯
                        </p>
                    </div>
                    <div class="p-6">
                        <div class="grid grid-cols-2 lg:grid-cols-3 gap-4">
                            {
                                categories.slice(3).map((category) => (
                                    <a
                                        href={`/categories/${category.href}`}
                                        class="bg-gray-50 hover:bg-gray-100 rounded-lg p-4 border border-gray-200 transition-all duration-300 hover:shadow-md group"
                                    >
                                        <div class="flex items-center">
                                            <span class="text-2xl mr-3">
                                                {category.icon}
                                            </span>
                                            <div>
                                                <h3 class="font-medium text-gray-800 group-hover:text-indigo-600">
                                                    {category.name}
                                                </h3>
                                                <p class="text-xs text-gray-500 mt-1">
                                                    æŸ¥çœ‹ç›¸å…³æ–‡ç« 
                                                </p>
                                            </div>
                                        </div>
                                    </a>
                                ))
                            }
                        </div>
                    </div>
                </div>
            </section>

            <!-- å®Œæ•´æ ‡ç­¾äº‘ -->
            <section>
                <div
                    class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-8"
                >
                    <TagsCloud />
                </div>
            </section>
        </div>
    </div>

    <!-- æ‰‹æœºç«¯åº•éƒ¨ç®€æ´æç¤º -->
    <div class="lg:hidden mt-12 mb-8">
        <div class="container mx-auto px-4">
            <div
                class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 text-center"
            >
                <div class="text-2xl mb-3">ğŸ“±</div>
                <h3 class="font-semibold text-gray-800 mb-2">ç²¾ç®€æ¨¡å¼</h3>
                <p class="text-sm text-gray-600">
                    æ‰‹æœºç«¯ä¸ºæ‚¨ç²¾é€‰æœ€é‡è¦çš„å†…å®¹ï¼Œè·å–å®Œæ•´ä½“éªŒè¯·ä½¿ç”¨æ¡Œé¢ç«¯æµè§ˆ
                </p>
                <div class="mt-4">
                    <a
                        href="/all-categories"
                        class="inline-flex items-center text-sm text-blue-600 font-medium hover:text-blue-700"
                    >
                        æŸ¥çœ‹æ‰€æœ‰åˆ†ç±»
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-4 w-4 ml-1"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
</BaseLayout>

<style>
    /* åŸºç¡€å¸ƒå±€æ ·å¼ */
    .container {
        max-width: 1400px;
    }

    .sticky {
        position: sticky;
    }

    /* å“ç±»å¯¼èˆªæ ·å¼ */
    .category-nav-item {
        transform: perspective(1000px) rotateX(0deg);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .category-nav-item:hover {
        transform: perspective(1000px) rotateX(-5deg) translateY(-2px);
    }

    /* æ‰‹æœºç«¯ä¼˜åŒ– */
    @media (max-width: 1023px) {
        /* ä¸»å†…å®¹åŒºåœ¨æ‰‹æœºç«¯å æ»¡å…¨å®½ */
        main {
            width: 100%;
        }

        /* å“ç±»å¯¼èˆªåœ¨æ‰‹æœºç«¯ä½¿ç”¨æ›´å¤§çš„é—´è· */
        .category-nav-item {
            padding: 1rem 0.5rem;
        }

        /* åˆ†ç±»å®¹å™¨åœ¨æ‰‹æœºç«¯ä½¿ç”¨æ›´å¤§çš„åœ†è§’ */
        .category-container {
            border-radius: 16px;
        }

        /* ç‰¹è‰²è½®æ’­åœ¨æ‰‹æœºç«¯é«˜åº¦è°ƒæ•´ */
        .featured-section {
            margin-bottom: 2rem;
        }
    }

    /* å¹³æ¿ç«¯ä¼˜åŒ– */
    @media (min-width: 768px) and (max-width: 1023px) {
        .grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
    }

    /* æ¡Œé¢ç«¯å¸ƒå±€ */
    @media (min-width: 1024px) {
        main {
            border-left: 1px solid #f3f4f6;
            border-right: 1px solid #f3f4f6;
            padding-left: 1.5rem;
            padding-right: 1.5rem;
        }
    }

    /* åˆ†ç±»å®¹å™¨æ ·å¼ */
    .category-container {
        position: relative;
        overflow: hidden;
        border-radius: 12px;
    }

    .category-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 2px;
        background: linear-gradient(90deg, transparent, #3b82f6, transparent);
        animation: shimmer 2s infinite;
        z-index: 1;
    }

    @keyframes shimmer {
        0% {
            left: -100%;
        }
        100% {
            left: 100%;
        }
    }

    /* äº¤äº’åŠ¨ç”» */
    .featured-section,
    .categories-showcase > * {
        transition:
            transform 0.2s ease,
            box-shadow 0.2s ease;
    }

    .featured-section:hover,
    .categories-showcase > *:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    /* åŠ è½½åŠ¨ç”» */
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .space-y-6 > *,
    .space-y-8 > * {
        animation: fadeInUp 0.8s ease forwards;
    }

    .space-y-6 > *:nth-child(1) {
        animation-delay: 0.1s;
    }
    .space-y-6 > *:nth-child(2) {
        animation-delay: 0.2s;
    }
    .space-y-6 > *:nth-child(3) {
        animation-delay: 0.3s;
    }
    .space-y-8 > *:nth-child(1) {
        animation-delay: 0.2s;
    }
    .space-y-8 > *:nth-child(2) {
        animation-delay: 0.4s;
    }
    .space-y-8 > *:nth-child(3) {
        animation-delay: 0.6s;
    }

    /* æ»šåŠ¨è¡Œä¸ºä¼˜åŒ– */
    html {
        scroll-behavior: smooth;
    }

    /* é¢œè‰²å˜é‡å›é€€ */
    .bg-blue-50 {
        background-color: #eff6ff;
    }
    .bg-purple-50 {
        background-color: #faf5ff;
    }
    .bg-green-50 {
        background-color: #f0fdf4;
    }
    .bg-orange-50 {
        background-color: #fff7ed;
    }
    .bg-red-50 {
        background-color: #fef2f2;
    }
    .bg-indigo-50 {
        background-color: #eef2ff;
    }
    .bg-cyan-50 {
        background-color: #ecfeff;
    }
    .bg-teal-50 {
        background-color: #f0fdfa;
    }
    .bg-pink-50 {
        background-color: #fdf2f8;
    }
</style>
