---
// src/pages/tags/[tag]/index.astro
// 标签页面重定向到第一页

export async function getStaticPaths() {
    const allPosts = Object.values(
        import.meta.glob("../../post/*.md", { eager: true }),
    );

    // 提取所有标签
    const allTags = allPosts.map((post) => post.frontmatter?.tags || []).flat();
    const uniqueTags = [...new Set(allTags)];

    return uniqueTags.map((tag) => ({
        params: { tag: tag },
    }));
}

const { tag } = Astro.params;

// 重定向到第一页
return Astro.redirect(`/tags/${encodeURIComponent(tag)}/1`);
---
